ittf 
    $ 
        var step_name = 'normative_e_standard.step_2';
        var x_options = {
            step_1_JSONSchema: _.stringify(wzCtx.schemas.normative_checks, null, null),
        } 
        // var provider = 'chatGPT';
        // provider = 'grok';
        var provider = 'deepSeek';
        var maxNumInBatch = 5;
        var batches = [];
        var currentBatch = {
            id: 1,
            items: []
        } 
        var count = 0;
    $foreach aiItem in wzCtx.root_prompts.normative_checks.items
        $ _.log('----> ', step_name, 'aiItem.title', aiItem.title);
        $if count > maxNumInBatch
            $ 
                batches.push(currentBatch); 
                currentBatch = {
                    id: currentBatch.id + 1,
                    items: [aiItem]
                } 
                count = 1;
        $else 
            $ 
                currentBatch.items.push(aiItem); 
                count++; 
    $if currentBatch.items.length > 0
        $ batches.push(currentBatch);
    $ _.log('----> batches.length', batches.length);
    $foreach batch in batches
        $file .wizzi-override/docs/normative_e_standard/ai_step_2_in/batch-${batch.id}.ai.ittf
            ai ${step_name}
                api-url http://localhost:3000
                $foreach batchItem in batch.items
                    $ 
                        var filterOk = true;
                    $if filterOk
                        $ var batchItemJSONString = _.stringify(batchItem, null, null)
                        $ 
                            var options = {
                                provider: provider,
                                id: batchItem.title,
                                inputJSON: batchItem,
                                inputJSONString: batchItemJSONString,
                                JSONSchema: x_options.step_1_JSONSchema,
                                product_supplier_JSON: null, // not used
                            } 
                        call ${options.id}
                            description normative_e_standard - ${options.id}
                            message 
                                role system
                                content 
                                    ${''}\n Sei un esperto di cybersecurity in contesto OT/ICS
                                    ${''}\n e conosci le principali normative di riferimento
                            message 
                                role user
                                content 
                                    ${''}\n Genera un JSON con un database di articoli per la normativa di cybersecurity
                                    ${''}\n che ti verrà indicata nell'`input_json_data` fornito che conterrà anche i
                                    ${''}\n link significativi alle norme di riferimento e altre fonti autorevoli.
                                    ${''}\n Il contenuto deve essere conforme allo schema JSON fornito e 
                                    ${''}\n orientato agli auditor, con un tono tecnico, chiaro e pratico, 
                                    ${''}\n in linea con lo stile di Logbot: professionale, tecnico ma accessibile. 
                                    ${''}\n Segui queste istruzioni:
                                    ${''}\n 1. **Contenuto da Generare**:
                                    ${''}\n  - **Formato di Output**: JSON conforme allo schema fornito, con un array `database_articoli`, dove ogni oggetto contiene:
                                    ${''}\n  - `normativa`: Nome della normativa (es. 'NIS2').
                                    ${''}\n  - `articolo_sezione`: Identificatore dell’articolo o sezione (es. 'Articolo 21').
                                    ${''}\n  - `descrizione`: Sintesi del contenuto e del requisito (es. 'Richiede l’implementazione di misure di gestione del rischio').
                                    ${''}\n  - `controlli_audit`: Array di 1-5 azioni specifiche per verificare la conformità (es. 'Verifica delle policy di sicurezza').
                                    ${''}\n  - `link_risorse`: Array di URL al testo ufficiale o guida pertinente.
                                    ${''}\n 3. **Parametri forniti nell'`input_json_data`**:
                                    ${''}\n  - `normativa`: Nome della normativa (es. 'NIS2').
                                    ${''}\n  - `link_risorse`: Array di URL al testo ufficiale o guida pertinente.
                                    ai/schema_data_return( &options, step )
    ${'$'}file .wizzi-override/docs/normative_e_standard/ai_step_2_out/index.json.ittf
        { 
            [ items
                $foreach batch in batches
                    ${'$'}include batch-${batch.id}